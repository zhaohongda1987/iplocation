<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>layui</title>
	<meta name="renderer" content="webkit">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<link href="/iplocation/resources/js/layer/css/layui.css" rel="stylesheet">
</head>
<body>
	<div class="layui-tab layui-tab-brief" lay-filter="docDemoTabBrief">
		<ul class="layui-tab-title">
    		<li class="layui-this">Table</li>
    		<li>Pie chart</li>
  	</ul>
  	<div class="layui-tab-content">
    	<div class="layui-tab-item layui-show">
        <table class="layui-table" id="layui-table">
        </table>
    	</div>
    	<div class="layui-tab-item">
    		<div id="pie" style="min-width: 700px; height: 400px">  
        </div>
    	</div>
  	</div>
  	<script src="/iplocation/resources/js/layer/layui.js" charset="utf-8"></script>
  	<script src="/iplocation/resources/js/echart/echarts.simple.min.js" charset="utf-8"></script>
  	<script>
    var chartData = ${chartData};
    layui.use(['element', 'table'], function(){
      var $ = layui.jquery
      ,element = layui.element
      ,table = layui.table;
      // active
      var active = {
        tabChange: function(){
          // change tab
          element.tabChange();
        }
      };
      $('.site-demo-active').on('click', function(){
        var othis = $(this), type = othis.data('type');
        active[type] ? active[type].call(this, othis) : '';
      });
      // table
      table.render({
        elem: '#layui-table',
        cols: [[
          {checkbox: true, fixed: true}
          ,{field:'country', title: 'country', width:160, sort: true, fixed: true}
          ,{field:'num', title: 'num', width:120, sort: true, fixed: true}
        ]]
        ,data: chartData.tableData
        ,page: true
        ,initSort: {
          field: 'num'
          ,type: 'desc'
        }
        ,loading: true
        ,skin: 'line'
        ,even: true
      });
    });

    // pie chart
    var drawPie = function(config) {
      this.myChart = echarts.init(document.getElementById("pie"));
      option = {
        title : {
          text: 'text',
          subtext: 'subtext',
          x:'center'
        },
        tooltip : {
          trigger : 'item',
          formatter : "{a} <br/>{b} : {c} ({d}%)"
        },
        legend : {
          orient : 'horizontal',
          bottom : 'bottom',
          data : config.legend
        },
        color:['#1ABC9C','#F1C40F','#3498DB','#E67E22','#2ECC71','#E74C3C','#9B59B6','#A8B4B6','#34495E','#778484'],
        series : [ {
          name : 'pie chart test',
          type : 'pie',
          radius : '55%',
          center : [ '50%', '60%' ],
          data : config.data,
          itemStyle : {
            emphasis : {
              shadowBlur : 10,
              shadowOffsetX : 0,
              shadowColor : 'rgba(0, 0, 0, 0.5)'
            }
          }
        } ]
      };
      this.myChart.setOption(option);
    };
    drawPie(chartData.pieData);
    </script>
</body>
</html>